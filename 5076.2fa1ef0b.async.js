"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[5076],{76165:function(Pe,ce,n){n.d(ce,{NL:function(){return R},rJ:function(){return X},ri:function(){return Q},v0:function(){return e}});var v=n(12903),K=n.n(v),_=n(32810),ae=n.n(_),ue=n(5677),E=n.n(ue),g=n(53874),X=function(a){return a[a.PENDING=0]="PENDING",a[a.GENERATING=1]="GENERATING",a[a.DONE=2]="DONE",a[a.STOPPED=3]="STOPPED",a}({}),Q=K()(function a(m){ae()(this,a),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"createdAt",void 0),E()(this,"title",void 0),E()(this,"prompts",void 0),E()(this,g.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.prompts=m.prompts||[]}),R=K()(function a(m){ae()(this,a),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"createdAt",void 0),E()(this,"title",void 0),E()(this,"messages",void 0),E()(this,g.sc,!0),this.id=m.id,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.title=m.title,this.messages=m.messages||[]}),e=K()(function a(m){var Z,T;ae()(this,a),E()(this,"id",void 0),E()(this,"assistantId",void 0),E()(this,"creator",void 0),E()(this,"createdAt",void 0),E()(this,"content",void 0),E()(this,"status",void 0),E()(this,g.sc,!0),this.id=m.id,this.creator=m.creator,this.assistantId=m.assistantId,this.createdAt=m.createdAt||new Date().valueOf(),this.content=(Z=m.content)!==null&&Z!==void 0?Z:"",this.status=(T=m.status)!==null&&T!==void 0?T:X.PENDING})},25076:function(Pe,ce,n){n.d(ce,{Z:function(){return gn}});var v=n(79685),K=n(48651),_=n.n(K),ae=n(90554),ue=n(28870),E=n(38046),g=n.n(E),X=n(94046),Q=n(68591),R=n.n(Q),e=n(63342),a=["type","className","children"],m="dtc__aigc__button__global-gradient",Z="secondary_linear_gradient",T="secondary_linear_gradient_hover";function te(t){var r=t.type,l=r===void 0?"default":r,u=t.className,s=t.children,h=g()(t,a);return(0,v.useEffect)(function(){if(!document.querySelector(".".concat(m))){var y=document.createElement("div");y.style.setProperty("width","0"),y.style.setProperty("height","0"),y.className=m,y.innerHTML=(0,X.Dq)((0,e.jsx)("svg",{width:0,height:0,children:(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:Z,x1:"1.18164",y1:"3.93164",x2:"13.9881",y2:"8.54198",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]}),(0,e.jsxs)("linearGradient",{id:T,x1:"8.96582",y1:"0.96582",x2:"15.9711",y2:"3.4877",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})]})})),document.body.appendChild(y)}},[]),(0,e.jsx)(ue.default,_()(_()({className:R()("dtc__aigc__button",u,"dtc__aigc__button--".concat(l)),ghost:!0},h),{},{children:(0,e.jsx)("span",{className:"dtc__aigc__button__text",children:s})}))}var z=n(81930),q=n(45217),re=n(9392),L=["lineNumberStyle"];function f(t){var r=t.className,l=t.style,u=t.toolbars,s=t.copy,h=t.convert,y=t.children,I=t.options,$=I===void 0?{}:I,M=$.lineNumberStyle,S=M===void 0?{}:M,H=g()($,L),G=(0,v.useMemo)(function(){var pe=y[0],_e=/language-(\w+)/.exec(pe.props.className||""),ye=_e?_e[1]:"SQL",ge=String(pe.props.children).replace(/\n$/,"");return{value:ge,language:ye}},[y]),x=G.value,F=G.language,k=(0,v.useMemo)(function(){return typeof s=="boolean"?{disabled:!s,options:{}}:{disabled:!1,options:_()({},s||{})}},[s]),me=x||"";return(0,e.jsxs)("div",{className:R()("dtc__aigc__codeblock",h&&"dtc__aigc__codeblock--convert",r),style:l,children:[(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__header",children:[(0,e.jsx)("span",{className:"dtc__aigc__codeblock__language",children:F.toLocaleLowerCase()}),(0,e.jsxs)("div",{className:"dtc__aigc__codeblock__tool",children:[!k.disabled&&(0,e.jsx)(re.Z,_()({text:me},k.options)),typeof u=="function"?u():u]})]}),(0,e.jsx)(z.Z,_()(_()({language:F.toLocaleLowerCase(),wrapLines:!0,style:_()(_()({},q.Yn),{},{'code[class*="language-"]':_()(_()({},q.Yn['code[class*="language-"]']),{},{background:h?"#F9F9FA":"#fff"}),'pre[class*="language-"]':_()(_()({},q.Yn['pre[class*="language-"]']),{},{background:h?"#F9F9FA":"#fff",margin:0,overflow:"auto",maxHeight:270,borderRadius:"0 0 4px 4px"})}),lineNumberStyle:_()({fontStyle:"normal"},S),showLineNumbers:!0},H),{},{children:me}))]})}var D=n(86516),N=n.n(D),j=n(76165),U=n(88289),J=n(4125),ee=n(80244),V=n(59058),A=n(71074),he=n(58351);function b(t){return t.loading?(0,e.jsxs)("div",{className:"dtc__aigc__loading",children:[(0,e.jsx)("div",{}),(0,e.jsx)("div",{}),(0,e.jsx)("div",{})]}):(0,e.jsx)(e.Fragment,{children:t.children})}var se=n(70300),oe=n.n(se),fe=n(50459),Ee=n(71877),De=n(63949),Fe=["typing","className","rehypePlugins","remarkPlugins","codeBlock","components","children","onMount"],we=["src"],be=(0,v.memo)(function(r){var l=r.typing,u=r.className,s=r.rehypePlugins,h=s===void 0?[]:s,y=r.remarkPlugins,I=y===void 0?[]:y,$=r.codeBlock,M=r.components,S=r.children,H=r.onMount,G=g()(r,Fe);return(0,v.useEffect)(function(){H==null||H()},[]),(0,e.jsx)(fe.D,_()(_()({className:R()("dtc__aigc__markdown",l&&"dtc__aigc__markdown--blink",u),rehypePlugins:h,remarkPlugins:[Ee.Z].concat(oe()(I)),components:_()({code:function(F){var k=F.children;return(0,e.jsx)("code",{className:"dtc__aigc__markdown__inlineCode",children:k})},pre:function(F){var k=F.children;return(0,e.jsx)(f,_()(_()({},$),{},{children:k}))},hr:function(){return(0,e.jsx)("hr",{color:"#ebecf0",className:"dtc__aigc__markdown__hr"})},p:function(F){return F.node.children.every(function(k){return k.type==="text"})?(0,e.jsx)("p",{children:F.children}):(0,e.jsx)("div",{children:F.children})},img:function(F){var k=F.src,me=g()(F,we);return(0,e.jsx)(De.Z,_()({className:"dtc__aigc__markdown__img",src:k},me))}},M),includeElementIndex:!0},G),{},{children:S}))},function(t,r){return!(t.typing!==r.typing||t.className!==r.className||t.children!==r.children||t.codeBlock!==r.codeBlock)});function Se(t){var r=t.current,l=t.total,u=t.onChange,s=t.style,h=t.disabled,y=r===1||h,I=r===l||h;return(0,e.jsxs)("div",{className:"dtc-aigc-pagination",style:s,children:[(0,e.jsx)(A.LeftOutlined,{className:y?"arrow-disabled":"",onClick:function(){y||u(r-1)},"data-testid":"icon-left"}),(0,e.jsxs)("section",{children:[(0,e.jsx)("span",{children:r}),(0,e.jsx)("span",{children:"/"}),(0,e.jsx)("span",{children:l})]}),(0,e.jsx)(A.RightOutlined,{className:I?"arrow-disabled":"",onClick:function(){I||u(r+1)},"data-testid":"icon-right"})]})}var Be=v.createContext({chat:void 0,maxRegenerateCount:5});function Re(){return v.useContext(Be)}var We=["formatText"];function Ue(t){var r=t.prompt,l=t.data,u=t.regenerate,s=t.copy,h=t.onRegenerate,y=t.onStop,I=t.onLazyRendered,$=(0,he.Z)(ve),M=Re(),S=M.components,H=S===void 0?{}:S,G=M.messageIcons,x=M.codeBlock,F=M.rehypePlugins,k=M.remarkPlugins,me=(0,v.useState)(!1),pe=N()(me,2),_e=pe[0],ye=pe[1],ge=(0,v.useRef)(function(){});function ve(B){var de=N()(B,1),xe=de[0];xe.isIntersecting&&ye(function(Ce){if(!Ce){var Ie=function(){return new Promise(function(hn){ge.current=hn})};I==null||I(Ie)}return!0})}var Y=(0,v.useState)(l.length),W=N()(Y,2),ne=W[0],w=W[1],P=l[ne-1],c=(0,v.useMemo)(function(){return P?[P.status===j.rJ.GENERATING,P.status===j.rJ.PENDING,P.status===j.rJ.STOPPED]:[!1,!1,!1]},[P]),o=N()(c,3),d=o[0],i=o[1],p=o[2];(0,v.useEffect)(function(){w(l.length)},[l.length]);var C=(0,v.useMemo)(function(){return Object.keys(H).reduce(function(B,de){var xe=H[de];return B[de]=function(){for(var Ce=arguments.length,Ie=new Array(Ce),je=0;je<Ce;je++)Ie[je]=arguments[je];return typeof xe=="function"?xe.apply(void 0,Ie.concat([{messageId:P==null?void 0:P.id,promptId:r.id}])):xe},B},{})},[H,P==null?void 0:P.id]),O=(0,v.useMemo)(function(){return typeof s=="boolean"?{disabled:!s,options:{}}:{disabled:!1,options:_()({},s||{})}},[s]),le=function(){var de;if(O.disabled)return null;var xe=O.options,Ce=xe.formatText,Ie=g()(xe,We),je=(de=Ce==null?void 0:Ce(P==null?void 0:P.content))!==null&&de!==void 0?de:P==null?void 0:P.content;return je?(0,e.jsx)(re.Z,_()({className:"dtc__message__icon",button:(0,e.jsx)(A.CopyOutlined,{}),text:je},Ie)):null};return(0,e.jsxs)("section",{className:"dtc__message__container",children:[(0,e.jsx)("div",{className:"dtc__message__avatar",children:(0,e.jsx)(A.AiAvatarColored,{})}),(0,e.jsxs)("div",{className:"dtc__message__wrapper",children:[(0,e.jsxs)("div",{className:R()("dtc__message__content",i&&"dtc__message__content--loading"),ref:$,children:[(0,e.jsx)(b,{loading:i,children:_e&&(0,e.jsx)(be,{typing:d,components:C,codeBlock:x,rehypePlugins:F,remarkPlugins:k,onMount:function(){ge.current()},children:P==null?void 0:P.content})}),(0,e.jsxs)("div",{className:"dtc__message__footer",children:[l.length>1&&!d&&!i&&(0,e.jsx)(Se,{current:ne,total:l.length,onChange:function(de){return w(de)}}),p&&(0,e.jsx)("span",{className:"dtc__message__stopText",children:"\u56DE\u7B54\u5DF2\u505C\u6B62"})]})]}),(d||i)&&(0,e.jsx)("div",{className:"dtc__message__extra",children:(0,e.jsx)(ue.default,{type:"link",className:"dtc__message__stopBtn",onClick:function(){return y==null?void 0:y(P)},icon:(0,e.jsx)(A.PauseOutlined,{style:{verticalAlign:"sub"}}),children:"\u505C\u6B62\u56DE\u7B54"})})]}),!d&&!i&&(0,e.jsxs)(J.default,{className:"dtc__message__iconGroup",align:"center",children:[le(),typeof G=="function"?G(P,r):G,u&&(0,e.jsx)(V.default,{title:"\u91CD\u65B0\u751F\u6210",getTooltipContainer:function(de){return de.parentNode},children:(0,e.jsx)("span",{className:"dtc__message__icon",onClick:function(){return h==null?void 0:h(P)},children:(0,e.jsx)(A.ReloadOutlined,{})})})]})]})}function Le(t){var r=t.data,l=t.className,u=Re(),s=u.components,h=s===void 0?{}:s,y=u.codeBlock,I=(0,v.useMemo)(function(){return Object.keys(h).reduce(function($,M){var S=h[M];return $[M]=function(){for(var H=arguments.length,G=new Array(H),x=0;x<H;x++)G[x]=arguments[x];return typeof S=="function"?S.apply(void 0,G.concat([{promptId:r==null?void 0:r.id}])):S},$},{})},[h,r==null?void 0:r.id]);return r!=null&&r.title?(0,e.jsx)("section",{className:R()("dtc__prompt__container",l),children:(0,e.jsx)("div",{className:"dtc__prompt__wrapper",children:(0,e.jsx)("div",{className:"dtc__prompt__content",children:(0,e.jsx)(be,{codeBlock:y,components:I,children:(r==null?void 0:r.title)||""})})})}):null}var Ge=(0,v.forwardRef)(function(t,r){var l,u=t.data,s=t.placeholder,h=t.scrollable,y=h===void 0?!0:h,I=t.onRegenerate,$=t.onStop,M=Re(),S=M.maxRegenerateCount,H=M.copy,G=M.regenerate,x=(0,v.useRef)(null),F=(0,v.useState)(!0),k=N()(F,2),me=k[0],pe=k[1],_e=(0,v.useRef)(0);(0,v.useImperativeHandle)(r,function(){return{nativeElement:x.current,scrollToBottom:function(){_e.current=window.requestAnimationFrame(function(){var ne,w;(ne=x.current)===null||ne===void 0||ne.scrollTo({top:(w=x.current)===null||w===void 0?void 0:w.scrollHeight,left:0,behavior:"instant"})})}}});var ye=function(){if(!x.current)return!1;var ne=5,w=x.current,P=w.scrollTop,c=w.clientHeight,o=w.scrollHeight;return P+c>=o-ne},ge=!!(Array.isArray(u)&&u.length),ve=u[u.length-1],Y=ge?(l=ve.messages)===null||l===void 0?void 0:l[ve.messages.length-1]:void 0;return(0,v.useLayoutEffect)(function(){var W,ne=function(){x.current&&pe(ye())};return(W=x.current)===null||W===void 0||W.addEventListener("scroll",ne),function(){var w;(w=x.current)===null||w===void 0||w.removeEventListener("scroll",ne),window.cancelAnimationFrame(_e.current)}},[]),(0,v.useLayoutEffect)(function(){_e.current=window.requestAnimationFrame(function(){x.current&&(ge?x.current.scrollTop=x.current.scrollHeight:x.current.scrollTop=0)})},[Y==null?void 0:Y.id]),(0,v.useLayoutEffect)(function(){_e.current=window.requestAnimationFrame(function(){x.current&&(Y==null?void 0:Y.status)===j.rJ.GENERATING&&me&&(x.current.scrollTop=x.current.scrollHeight)})},[Y==null?void 0:Y.status,Y==null?void 0:Y.content,me]),(0,e.jsx)("div",{className:R()("dtc__aigc__content__container",!y&&"dtc__aigc__content__container--disabled"),ref:x,children:ge?(0,e.jsx)("div",{className:"dtc__aigc__content__inner__holder",children:u.map(function(W,ne){var w=ne===u.length-1&&W.messages.length<S;return(0,e.jsxs)(v.Fragment,{children:[(0,e.jsx)(Le,{data:W}),(0,e.jsx)(Ue,{prompt:W,data:W.messages,regenerate:typeof G=="function"?G(W,ne,u):G!=null?G:w,copy:H,onRegenerate:function(c){return I==null?void 0:I(c,W)},onStop:function(c){return $==null?void 0:$(c,W)},onLazyRendered:function(c){var o=ye();c().then(function(){window.requestAnimationFrame(function(){pe(o),o&&x.current&&(x.current.scrollTop=x.current.scrollHeight)})})}})]},W.id)})}):(0,e.jsx)(v.Fragment,{children:s})})}),Ke=Ge,yn=n(83345),Ze=n(50425),ze=["className"],Je=["className"];function He(t){var r=t.className,l=g()(t,ze);return(0,e.jsx)("span",_()(_()({className:R()("dtc__icon",r)},l),{},{children:(0,e.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 24",children:[(0,e.jsx)("path",{fill:"url(#paint0_linear_3878_6538)",fillRule:"evenodd",d:"M17.999 3.858 3.35 9.204a1.66 1.66 0 0 0-1.095 1.458 1.66 1.66 0 0 0 .862 1.602l4.454 2.44c.27.143.593.098.808-.118l.737-.72 4.508-4.428a.677.677 0 0 1 .952.018c.26.261.26.693-.009.954l-4.562 4.473-.61.603a.68.68 0 0 0-.118.828l2.64 4.626c.315.513.845.81 1.429.81.063 0 .117 0 .18-.009a1.68 1.68 0 0 0 1.41-1.107L20.153 6a1.69 1.69 0 0 0-.404-1.764 1.64 1.64 0 0 0-1.751-.378",clipRule:"evenodd"}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#00BAC6"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#0067FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#450FDE"})]})}),(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"paint0_linear_3878_6538_hover",x1:"2.25",x2:"23.921",y1:"3.75",y2:"11.552",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})})]})}))}var Ve=function(r){var l=r.className,u=g()(r,Je);return(0,e.jsx)("span",_()(_()({className:R()("dtc__icon",l)},u),{},{children:(0,e.jsxs)("svg",{width:"1em",height:"1em",viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,e.jsx)("path",{d:"M0 3C0 1.34315 1.34315 0 3 0C4.65685 0 6 1.34315 6 3C6 4.65685 4.65685 6 3 6C1.34315 6 0 4.65685 0 3Z",fill:"url(#paint0_linear_5253_12831)"}),(0,e.jsx)("circle",{cx:"3",cy:"3",r:"3",fill:"url(#paint1_linear_5253_12831)"}),(0,e.jsxs)("defs",{children:[(0,e.jsxs)("linearGradient",{id:"paint0_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]}),(0,e.jsxs)("linearGradient",{id:"paint1_linear_5253_12831",x1:"0",y1:"0",x2:"7.2238",y2:"2.60057",gradientUnits:"userSpaceOnUse",children:[(0,e.jsx)("stop",{stopColor:"#08C4FF"}),(0,e.jsx)("stop",{offset:"0.5",stopColor:"#4892FF"}),(0,e.jsx)("stop",{offset:"1",stopColor:"#8A61FF"})]})]})]})}))},ke=["onChange","onPressEnter","onPressShiftEnter","onSubmit","button","className"];function Ye(t){var r=t.onChange,l=t.onPressEnter,u=t.onPressShiftEnter,s=t.onSubmit,h=t.button,y=t.className,I=g()(t,ke),$=function(S){r==null||r(S.target.value)};return(0,e.jsxs)("div",{className:"dtc__chat__textarea__container",children:[(0,e.jsx)(Ze.default.TextArea,_()(_()({className:R()("dtc__chat__textarea",y)},I),{},{onChange:$,onPressEnter:function(S){S.persist(),S.preventDefault(),S.shiftKey?(r==null||r(I.value+`
`),u==null||u(S)):l==null||l(S)},autoSize:{minRows:2,maxRows:7}})),h!=null&&h.disabled?(0,e.jsx)(A.SendFilled,{disabled:!0,className:"dtc__chat__textarea__send"}):(0,e.jsx)(He,{className:R()("dtc__chat__textarea__send"),onClick:function(){return s==null?void 0:s(I.value)}})]})}var Xe=["className","children"],Qe=function(r){var l=r.className,u=r.children,s=g()(r,Xe);return(0,e.jsxs)("div",_()(_()({className:R()("dtc__tag",l)},s),{},{children:[(0,e.jsx)(Ve,{className:"dtc__tag__icon"}),u]}))},qe=Qe,en=n(22786),$e=n.n(en),nn=n(46299),tn=n.n(nn),rn=n(12903),Oe=n.n(rn),sn=n(32810),Te=n.n(sn),on=n(89822),Ae=n.n(on),an=n(38832),Me=n.n(an),Ne=n(53874),ln=n(18411),cn=function(t){Ae()(l,t);var r=Me()(l);function l(){return Te()(this,l),r.apply(this,arguments)}return Oe()(l)}(j.ri),un=function(t){Ae()(l,t);var r=Me()(l);function l(){return Te()(this,l),r.apply(this,arguments)}return Oe()(l)}(j.NL),dn=function(t){Ae()(l,t);var r=Me()(l);function l(){return Te()(this,l),r.apply(this,arguments)}return Oe()(l)}(j.v0),mn=function(r){return(r+1)%1e6};function _n(t){var r=(0,v.useReducer)(mn,0),l=N()(r,2),u=l[1],s=(0,v.useRef)(void 0),h=(0,ln.Z)({onTyping:function(o){ve(y.current.promptId,y.current.messageId,{content:o})}}),y=(0,v.useRef)({promptId:"",messageId:""}),I=(0,v.useRef)(!1);function $(c,o){h.start(),ve(c,o,{status:j.rJ.PENDING}),y.current={promptId:c,messageId:o}}function M(c,o,d){if(c===y.current.promptId&&o===y.current.messageId){var i;h.push(d),((i=Y(c,o))===null||i===void 0?void 0:i.status)!==j.rJ.GENERATING&&ve(c,o,{status:j.rJ.GENERATING})}}function S(c,o){I.current=!0,h.close().then(function(){I.current=!1,ve(c,o,{status:j.rJ.DONE})})}function H(c){var o,d=(t==null||(o=t.ctor)===null||o===void 0?void 0:o.Conversation)||cn;s.current=new d(c),u()}function G(){s.current=void 0,u()}function x(c){s.current&&(s.current=(0,Ne.Uy)(s.current,function(o){Object.assign(o,c)}),u())}function F(){return s.current}function k(){for(var c,o=arguments.length,d=new Array(o),i=0;i<o;i++)d[i]=arguments[i];if(s.current){var p=(t==null||(c=t.ctor)===null||c===void 0?void 0:c.Prompt)||un;s.current=(0,Ne.Uy)(s.current,function(C){var O;(O=C.prompts)===null||O===void 0||O.push(new p(d[0]))}),u()}}function me(c){s.current&&(s.current=(0,Ne.Uy)(s.current,function(o){var d,i,p=(d=o.prompts)===null||d===void 0?void 0:d.findIndex(function(C){return C.id===c});p!==-1&&((i=o.prompts)===null||i===void 0||i.splice(p,1))}),u())}function pe(c,o){s.current&&(s.current=(0,Ne.Uy)(s.current,function(d){var i=d.prompts.find(function(p){return p.id===c});i&&(typeof o=="function"?Object.assign(i,o(i)):Object.assign(i,o))}),u())}function _e(c){var o,d;return(o=s.current)===null||o===void 0||(d=o.prompts)===null||d===void 0?void 0:d.find(function(i){return typeof c=="function"?c(i):i.id===c})}function ye(c){for(var o,d=arguments.length,i=new Array(d>1?d-1:0),p=1;p<d;p++)i[p-1]=arguments[p];if(s.current){var C=(t==null||(o=t.ctor)===null||o===void 0?void 0:o.Message)||dn;s.current=(0,Ne.Uy)(s.current,function(O){var le=O.prompts.find(function(B){return B.id===c});le&&le.messages.push(new C(i[0]))}),u()}}function ge(c,o){s.current&&(s.current=(0,Ne.Uy)(s.current,function(d){var i,p,C=d.prompts.find(function(le){return le.id===c});if(C){var O=(i=C.messages)===null||i===void 0?void 0:i.findIndex(function(le){return le.id===o});O!==-1&&((p=C.messages)===null||p===void 0||p.splice(O,1))}}),u())}function ve(c,o,d,i){s.current&&(s.current=(0,Ne.Uy)(s.current,function(p){var C,O=p.prompts.find(function(B){return B.id===c}),le=O==null||(C=O.messages)===null||C===void 0?void 0:C.find(function(B){return B.id===o});le&&(typeof d=="function"?Object.assign(le,d(le)):Object.assign(le,d))}),i!==!1&&u())}function Y(c,o){var d,i,p,C;return(d=s.current)===null||d===void 0||(i=d.prompts)===null||i===void 0||(p=i.find(function(O){return O.id===c}))===null||p===void 0||(C=p.messages)===null||C===void 0?void 0:C.find(function(O){return O.id===o})}function W(){var c,o,d,i,p=(c=s.current)===null||c===void 0||(o=c.prompts)===null||o===void 0?void 0:o[((d=s.current)===null||d===void 0?void 0:d.prompts.length)-1],C=p==null||(i=p.messages)===null||i===void 0?void 0:i[p.messages.length-1];return C?C.status===j.rJ.PENDING||C.status===j.rJ.GENERATING:!1}function ne(){return w.apply(this,arguments)}function w(){return w=tn()($e()().mark(function c(){var o,d,i,p,C,O;return $e()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(C=(o=s.current)===null||o===void 0||(d=o.prompts)===null||d===void 0?void 0:d[((i=s.current)===null||i===void 0?void 0:i.prompts.length)-1],O=C==null||(p=C.messages)===null||p===void 0?void 0:p[C.messages.length-1],(O==null?void 0:O.status)!==j.rJ.GENERATING){B.next=8;break}return B.next=5,h.close(!0);case 5:I.current&&ve(C.id,O.id,{status:j.rJ.DONE}),B.next=9;break;case 8:h.stop();case 9:return B.abrupt("return",F());case 10:case"end":return B.stop()}},c)})),w.apply(this,arguments)}function P(c){if(s.current=c,I.current=!1,W()){var o,d,i=F(),p=i==null||(o=i.prompts)===null||o===void 0?void 0:o[(i==null?void 0:i.prompts.length)-1],C=p==null||(d=p.messages)===null||d===void 0?void 0:d[p.messages.length-1];if(!p||!C)return s.current;h.start(C.content),y.current={promptId:p.id,messageId:C.id}}return u(),s.current}return{conversation:{create:H,remove:G,update:x,get:F},prompt:{create:k,remove:me,update:pe,get:_e},message:{create:ye,remove:ge,update:ve,get:Y},loading:W,start:$,push:M,close:S,stop:h.stop,isTyping:h.isTyping,saveViewState:ne,restoreViewState:P}}var vn=n(80070);function fn(t){var r=t.icon,l=r===void 0?(0,e.jsx)(A.AiAvatarColored,{style:{fontSize:24}}):r,u=t.title,s=t.description,h=t.className,y=t.style;return(0,e.jsx)("div",{className:R()("dtc__welcome",h),style:y,children:(0,e.jsxs)("div",{className:"dtc__welcome__content",children:[(0,e.jsxs)(vn.Z,{gap:8,align:"center",children:[l,(0,e.jsx)("span",{className:"dtc__welcome__title",children:u})]}),(0,e.jsx)("div",{className:"dtc__welcome__description",children:s})]})})}var pn=5;function ie(t){var r=t.chat,l=t.components,u=t.maxRegenerateCount,s=u===void 0?pn:u,h=t.regenerate,y=t.copy,I=t.codeBlock,$=t.messageIcons,M=t.rehypePlugins,S=t.remarkPlugins,H=t.children;return(0,e.jsx)(Be.Provider,{value:{chat:r,components:l,maxRegenerateCount:s,copy:y,codeBlock:I,messageIcons:$,regenerate:h,rehypePlugins:M,remarkPlugins:S},children:H})}ie.useChat=_n,ie.useContext=Re,ie.Loading=b,ie.Button=te,ie.CodeBlock=f,ie.Input=Ye,ie.Markdown=be,ie.Pagination=Se,ie.Message=Ue,ie.Prompt=Le,ie.Content=Ke,ie.Tag=qe,ie.Welcome=fn;var gn=ie},9392:function(Pe,ce,n){n.d(ce,{Z:function(){return T}});var v=n(48651),K=n.n(v),_=n(80244),ae=n(59058),ue=n(71089),E=n(75020),g=n(79685),X=n(29520),Q=n(71074),R=n(68591),e=n.n(R),a=n(50475),m=n(63342),Z=function(z){var q=z.button,re=q===void 0?(0,m.jsx)(Q.CopyOutlined,{className:"dtc-copy__default-icon"}):q,L=z.text,f=z.tooltip,D=f===void 0?"\u590D\u5236":f,N=z.style,j=z.className,U=z.disabled,J=U===void 0?!1:U,ee=z.onCopy,V=ee===void 0?function(){return E.default.success("\u590D\u5236\u6210\u529F")}:ee,A=function(){J||new X.X0().copy(L,function(){return V(L)})},he=function(){return(0,m.jsx)("span",{className:e()(["dtc-copy",{"dtc-copy--disabled":J},j]),style:N,onClick:function(){return A()},children:re})},b=(0,a.Z)(D);return(0,m.jsx)(ae.default,K()(K()({},b),{},{children:he()}))},T=Z},80070:function(Pe,ce,n){n.d(ce,{Z:function(){return R}});var v=n(48651),K=n.n(v),_=n(38046),ae=n.n(_),ue=n(79685),E=n(68591),g=n.n(E),X=n(63342),Q=["className","vertical","wrap","justify","align","flex","gap","style","children"],R=(0,ue.forwardRef)(function(a,m){var Z=a.className,T=a.vertical,te=T===void 0?!1:T,z=a.wrap,q=z===void 0?"nowrap":z,re=a.justify,L=re===void 0?"normal":re,f=a.align,D=f===void 0?"normal":f,N=a.flex,j=N===void 0?"normal":N,U=a.gap,J=U===void 0?0:U,ee=a.style,V=a.children,A=ae()(a,Q);return(0,X.jsx)("section",K()(K()({className:g()("dtc-flex",Z,te&&"dtc-flex__vertical"),style:K()({flexWrap:q,justifyContent:L,alignItems:D,flex:j,gap:J},ee),ref:m},A),{},{children:V}))})},63949:function(Pe,ce,n){var v=n(16842),K=n.n(v),_=n(81901),ae=n(38046),ue=n.n(ae),E=n(48651),g=n.n(E),X=n(86516),Q=n.n(X),R=n(79685),e=n(58351),a=n(63342),m=["src","className","style"],Z=["src","className","style","loader"];function T(L){return new Promise(function(f,D){var N=new Image;N.onload=function(){return f(!0)},N.onerror=D,N.src=L})}function te(L){var f=L.src,D=R.useState(!0),N=Q()(D,2),j=N[0],U=N[1],J=R.useState(void 0),ee=Q()(J,2),V=ee[0],A=ee[1];return R.useEffect(function(){T(f).then(function(){U(!1),A(f)}).finally(function(){U(!1)})},[f]),{isLoading:j,src:V}}var z=function(f){var D=f.lazy;return D?(0,a.jsx)(q,g()({},f)):(0,a.jsx)(re,g()({},f))},q=function(f){var D=f.src,N=f.className,j=f.style,U=ue()(f,m),J=(0,e.Z)(function(ee){var V=Q()(ee,1),A=V[0],he=A.target,b=A.isIntersecting;if(b){var se,oe=he;oe.src=(se=oe.dataset.src)!==null&&se!==void 0?se:"",oe.onload=function(){oe.style.opacity="1"}}});return(0,a.jsx)("img",g()(g()({className:N,style:j,ref:J},U),{},{"data-src":D}))},re=function(f){var D=f.src,N=f.className,j=f.style,U=f.loader,J=U===void 0?(0,a.jsx)(_.default,{spinning:!0}):U,ee=ue()(f,Z),V=te({src:D}),A=V.src,he=V.isLoading;return A?(0,a.jsx)("img",g()(g()({},ee),{},{className:N,style:j,src:A})):he?J:null};ce.Z=z},58351:function(Pe,ce,n){var v=n(86516),K=n.n(v),_=n(79685),ae=function(E){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=(0,_.useRef)(null),Q=g.threshold,R=Q===void 0?0:Q,e=g.root,a=e===void 0?null:e,m=g.rootMargin,Z=m===void 0?"0%":m,T=g.freezeOnceVisible,te=T===void 0?!1:T,z=(0,_.useState)(),q=K()(z,2),re=q[0],L=q[1],f=(re==null?void 0:re.isIntersecting)&&te,D=function(j,U){L(j[0]),E(j,U)};return(0,_.useEffect)(function(){var N=X.current,j=!!window.IntersectionObserver;if(!(f||!N)){if(!j){var U,J,ee={boundingClientRect:(U=N.getBoundingClientRect())!==null&&U!==void 0?U:null,intersectionRatio:1,intersectionRect:(J=N.getBoundingClientRect())!==null&&J!==void 0?J:null,isIntersecting:!0,rootBounds:null,target:N,time:Date.now()};D([ee],null)}var V=new IntersectionObserver(D,{threshold:R,root:a,rootMargin:Z});return V.observe(N),function(){return V.disconnect()}}},[JSON.stringify(R),a,Z,f]),X};ce.Z=ae},18411:function(Pe,ce,n){n.d(ce,{Z:function(){return Q}});var v=n(22786),K=n.n(v),_=n(46299),ae=n.n(_),ue=n(86516),E=n.n(ue),g=n(79685),X=50;function Q(R){var e=R.onTyping,a=(0,g.useRef)(),m=(0,g.useRef)(""),Z=(0,g.useRef)(1),T=(0,g.useRef)(0),te=(0,g.useRef)(!1),z=(0,g.useState)(!1),q=E()(z,2),re=q[0],L=q[1],f=(0,g.useRef)(!1),D=(0,g.useRef)(0);function N(){var b=m.current.length-T.current-1,se=1e3/X;Z.current=Math.ceil(b/se)}function j(){var b=m.current.slice(T.current),se=b.slice(0,Z.current),oe=/<[a-zA-Z]{0,4}\s[^<]*>/;if(oe.test(b)&&!oe.test(se)){var fe=b.match(oe),Ee=fe[0],De=b.indexOf(Ee);return T.current+De+Ee.length}return T.current+Z.current}function U(){a.current||(a.current=window.setInterval(function(){if(T.current<m.current.length){var b=m.current,se=j(),oe=b.slice(0,se);e(oe),T.current=oe.length}else te.current||(window.clearInterval(a.current),a.current=0,L(!1),f.current=!1)},X))}(0,g.useEffect)(function(){return function(){window.clearInterval(a.current),window.clearInterval(D.current),a.current=0}},[]);function J(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";te.current=!0,L(!0),window.clearInterval(a.current),a.current=0,m.current=b,T.current=b.length}function ee(b){te.current&&(b.startsWith("n")&&m.current.endsWith("\\")?m.current=m.current.slice(0,-1)+`
`+b.slice(1).replace(/\\n/g,`
`):m.current+=b.replace(/\\n/g,`
`),N(),U())}function V(b){return A.apply(this,arguments)}function A(){return A=ae()(K()().mark(function b(se){return K()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!se){fe.next=10;break}window.clearInterval(D.current),window.clearInterval(a.current),a.current=0,e(m.current),L(!1),f.current=!1,te.current=!1,fe.next=14;break;case 10:return te.current=!1,f.current=!0,window.clearInterval(D.current),fe.abrupt("return",new Promise(function(Ee){a.current?D.current=window.setInterval(function(){f.current||(Ee(),f.current=!0,window.clearInterval(D.current))},1e3):(Ee(),f.current=!1,L(!1),window.clearInterval(D.current))}));case 14:case"end":return fe.stop()}},b)})),A.apply(this,arguments)}function he(){te.current=!1,L(!1),f.current=!1,a.current&&(window.clearInterval(a.current),a.current=0),m.current="",T.current=0}return{start:J,push:ee,close:V,stop:he,isTyping:re}}}}]);
