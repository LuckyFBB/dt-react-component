"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[1268],{77625:function(Y,M,n){n.r(M);var R=n(90554),C=n.n(R),L=n(28870),O=n(48651),I=n.n(O),B=n(86516),x=n.n(B),f=n(83345),z=n.n(f),g=n(50425),W=n(79685),S=n(19576),A=n(52368),o=n(63342),y=function(t){var E=t.rowValues.input,l=t.rowKey,a=t.onChange;return(0,o.jsx)(g.default,{value:E,onChange:function(c){return a==null?void 0:a(l,{input:c.target.value})}})};M.default=function(){var s=(0,W.useState)(A.Bq),t=x()(s,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.ZP,{component:function(r){return(0,o.jsx)(y,I()({},r))},value:E,onChange:function(r){return l(r)},initValues:A.jv}),(0,o.jsx)(L.default,{onClick:function(){return console.log(E)},children:"\u63A7\u5236\u53F0\u67E5\u770B\u6570\u636E"})]})}},1809:function(Y,M,n){n.r(M);var R=n(48651),C=n.n(R),L=n(90554),O=n.n(L),I=n(28870),B=n(99764),x=n.n(B),f=n(9923),z=n(86516),g=n.n(z),W=n(83345),S=n.n(W),A=n(50425),o=n(79685),y=n(19576),s=n(52368),t=n(63342),E=function(a){var r=a.rowValues.input,c=a.rowKey,D=a.disabled,j=a.onChange;return(0,t.jsx)(A.default,{value:r,onChange:function(H){return j==null?void 0:j(c,{input:H.target.value})},disabled:D})};M.default=function(){var l=f.Z.useForm(),a=g()(l,1),r=a[0],c=(0,o.useState)(!1),D=g()(c,2),j=D[0],F=D[1];return(0,o.useEffect)(function(){r.setFieldsValue({condition:s.Bq})},[]),(0,t.jsxs)(f.Z,{form:r,children:[(0,t.jsxs)(I.default,{style:{marginBottom:16},onClick:function(){return F(!j)},children:[j?"\u7F16\u8F91":"\u67E5\u770B","\u72B6\u6001"]}),(0,t.jsx)(f.Z.Item,{name:"condition",children:(0,t.jsx)(y.ZP,{component:function(p){return(0,t.jsx)(E,C()({},p))},disabled:j,initValues:s.jv})})]})}},16358:function(Y,M,n){n.r(M);var R=n(48651),C=n.n(R),L=n(88289),O=n.n(L),I=n(4125),B=n(73735),x=n.n(B),f=n(82549),z=n(86516),g=n.n(z),W=n(83345),S=n.n(W),A=n(50425),o=n(79685),y=n(19576),s=n(52368),t=n(63342),E=function(a){var r=a.rowValues.input,c=a.rowKey,D=a.onChange;return(0,t.jsx)(A.default,{value:r,onChange:function(F){return D==null?void 0:D(c,{input:F.target.value})}})};M.default=function(){var l=(0,o.useState)(s.Bq),a=g()(l,2),r=a[0],c=a[1],D=(0,o.useState)(2),j=g()(D,2),F=j[0],H=j[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(I.default,{style:{marginBottom:16},children:[(0,t.jsx)("span",{children:"\u6700\u5927\u5B50\u8282\u70B9\u4E2A\u6570:"}),(0,t.jsx)(f.Z,{value:F,min:0,precision:0,onChange:function(i){return H(i!=null?i:0)}})]}),(0,t.jsx)(y.ZP,{component:function(i){return(0,t.jsx)(E,C()({},i))},value:r,maxSize:F,onChange:function(i){return c(i)},initValues:s.jv})]})}},51801:function(Y,M,n){n.r(M);var R=n(48651),C=n.n(R),L=n(67822),O=n.n(L),I=n(39153),B=n(86516),x=n.n(B),f=n(83345),z=n.n(f),g=n(50425),W=n(79685),S=n(19576),A=n(52368),o=n(63342),y=function(t){var E=t.rowValues.input,l=t.rowKey,a=t.onChange;return(0,o.jsx)(g.default,{value:E,onChange:function(c){return a==null?void 0:a(l,{input:c.target.value})}})};M.default=function(){var s=(0,W.useState)(A.AD),t=x()(s,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(I.default,{message:"\u53EF\u4EE5\u901A\u8FC7\u64CD\u4F5C\u6309\u94AE\u589E\u52A0\u5220\u9664\u6570\u636E\uFF0C\u5207\u6362\u4E14\u6216\u8282\u70B9\u5185\u5BB9",style:{marginBottom:16}}),(0,o.jsx)(S.ZP,{component:function(r){return(0,o.jsx)(y,C()({},r))},value:E,onChange:function(r){return l(r)},initValues:A.jv})]})}},95789:function(Y,M,n){n.r(M);var R=n(22786),C=n.n(R),L=n(46299),O=n.n(L),I=n(48651),B=n.n(I),x=n(90554),f=n.n(x),z=n(28870),g=n(86516),W=n.n(g),S=n(99764),A=n.n(S),o=n(9923),y=n(83345),s=n.n(y),t=n(50425),E=n(70300),l=n.n(E),a=n(79685),r=n(19576),c=n(52368),D=n(63342),j=function(H){var p=H.name;return(0,D.jsx)(o.Z.Item,{name:["condition"].concat(l()(p),["input"]),children:(0,D.jsx)(t.default,{})})};M.default=function(){var F=o.Z.useForm(),H=W()(F,1),p=H[0];return(0,D.jsxs)(o.Z,{form:p,children:[(0,D.jsx)(z.default,{onClick:function(){return p.setFieldsValue({condition:c.Bq})},style:{marginBottom:16},children:"\u6DFB\u52A0\u6570\u636E"}),(0,D.jsx)(o.Z.Item,{name:"condition",children:(0,D.jsx)(r.ZP,{component:function(V){return(0,D.jsx)(j,B()({},V))},notEmpty:{data:!1},initValues:c.jv})}),(0,D.jsx)(z.default,{onClick:O()(C()().mark(function i(){return C()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.t0=console,T.next=3,p.validateFields();case 3:return T.t1=T.sent,T.abrupt("return",T.t0.log.call(T.t0,T.t1));case 5:case"end":return T.stop()}},i)})),children:"\u63A7\u5236\u53F0\u67E5\u770B\u6570\u636E"})]})}},94034:function(Y,M,n){n.r(M);var R=n(48651),C=n.n(R),L=n(67822),O=n.n(L),I=n(39153),B=n(86516),x=n.n(B),f=n(83345),z=n.n(f),g=n(50425),W=n(79685),S=n(19576),A=n(52368),o=n(63342),y=function(t){var E=t.rowValues.input,l=t.disabled,a=t.rowKey,r=t.onChange;return(0,o.jsx)(g.default,{value:E,disabled:l,onChange:function(D){return r==null?void 0:r(a,{input:D.target.value})}})};M.default=function(){var s=(0,W.useState)(A.jN),t=x()(s,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(I.default,{message:"\u9002\u7528\u4E8E\u90E8\u5206\u6570\u636E\u7981\u7528\u4E14\u53EF\u4EE5\u7F16\u8F91\u5176\u4ED6\u6570\u636E\u3002\u5E38\u89C1\u4E1A\u52A1\u60C5\u666F\uFF1A\u4E0A\u4E00\u6B21\u4FDD\u5B58\u7684\u6570\u636E\u4E0D\u53EF\u4FEE\u6539\uFF0C\u4F46\u9700\u8981\u5728\u5F53\u524D\u57FA\u7840\u4E0A\u7EE7\u7EED\u65B0\u589E\u6570\u636E\u3002",style:{marginBottom:16}}),(0,o.jsx)(S.ZP,{component:function(r){return(0,o.jsx)(y,C()({},r))},value:E,onChange:function(r){return l(r)},initValues:A.jv})]})}},52368:function(Y,M,n){n.d(M,{AD:function(){return f},Bq:function(){return B},jN:function(){return x},jv:function(){return I}});var R=n(48651),C=n.n(R),L=n(50576),O=n.n(L),I={input:""},B={key:O()(),level:0,rowValues:C()({},I)},x={key:O()(),level:0,type:1,children:[{rowValues:{input:""},disabled:!0,key:O()(),level:1},{key:O()(),type:1,level:2,disabled:!0,children:[{rowValues:{input:""},key:O()(),level:2},{key:O()(),rowValues:{input:""},level:2}]}]},f={key:O()(),level:1,type:1,children:[{rowValues:{input:""},key:O()(),level:1},{key:O()(),type:2,level:2,children:[{key:O()(),level:2,rowValues:{input:""}},{key:O()(),rowValues:{input:""},level:2}]}]}},19576:function(Y,M,n){n.d(M,{de:function(){return c},NZ:function(){return D},ZP:function(){return H}});var R=n(48651),C=n.n(R),L=n(71089),O=n(75020),I=n(5677),B=n.n(I),x=n(79685),f=n(25043),z=n(50576),g=n.n(z),W=n(70300),S=n.n(W),A=n(71074),o=n(68591),y=n.n(o),s=n(63342),t=32,E=16,l=new WeakMap,a=function(i){var V=i.value,T=i.disabled,rn=i.maxLevel,X=i.maxSize,k=i.className,on=i.style,ln=i.component,_n=i.onAddCondition,un=i.onDeleteCondition,an=i.onChangeCondition,en=i.onChangeRowValues,nn=function(_){return(_==null?void 0:_.type)&&[c.AND,c.OR].includes(_==null?void 0:_.type)},U=function J(_,$){var Z=$||!!_.disabled;if(!(_!=null&&_.children))return l.set(_,{height:t+E,lineHeight:t});_.children.map(function(G){return J(G,Z)});var N=!_.children.some(nn),K=nn(_.children[0]);if(Z){var b=_.children.reduce(function(G,q){return G+l.get(q).height},0),v,Q;if(N)v=b-t-E;else{var tn,dn=_.children[0],mn=_.children[_.children.length-1],cn=l.get(dn).height-w(_,!0),En=nn(mn),vn=w(_,!1),Dn=l.get(mn).height-E-vn;Q=En?vn:t/2,v=cn+((tn=_.children)===null||tn===void 0?void 0:tn.slice(1,-1).reduce(function(G,q){return G+l.get(q).height},0))+Dn}l.set(_,{bottom:Q,lineHeight:v,height:b})}else{var P=_.children.reduce(function(G,q){return G+l.get(q).height},t),e;if(N){var d=l.get(_.children[0]).height-E,u=t;e=P-d/2-u/2}else{var h,m=K?l.get(_.children[0]).lineHeight/2+t/2:t/2+E;e=m+((h=_.children)===null||h===void 0?void 0:h.slice(1).reduce(function(G,q){return G+l.get(q).height},t/2))}l.set(_,{height:P,lineHeight:e})}return _},w=function J(_,$){var Z,N,K,P=$?_==null||(Z=_.children)===null||Z===void 0?void 0:Z[0]:_==null||(N=_.children)===null||N===void 0?void 0:N[(_==null||(K=_.children)===null||K===void 0?void 0:K.length)-1];if(!P)return t/2;var e=nn(P);if(e){var d;return((d=l.get(P))===null||d===void 0?void 0:d.lineHeight)/2+J(P,$)}return t/2},sn=function J(_,$,Z){var N,K=Z||!!_.disabled;if(_!=null&&(N=_.children)!==null&&N!==void 0&&N.length){var P,e=function(b){var v=S()($);return v.push.apply(v,["children",b]),v},d=l.get(_),u=d.lineHeight,h=d.bottom;return(0,s.jsxs)("div",{className:y()("dtc-ruleController__condition",{"dtc-ruleController__condition--active":_.children.length>1}),children:[(0,s.jsxs)("div",{className:y()("condition__box",{disabled:K}),style:{height:u,bottom:h!=null?h:E},children:[(0,s.jsx)("span",{className:y()("condition__box--name",{disabled:K}),onClick:function(){return!K&&an(_.key,_==null?void 0:_.type)},children:D[_==null?void 0:_.type]}),_.children.length>1&&(0,s.jsx)("span",{className:y()("condition__box--line",{disabled:Z})})]}),_.children.map(function(m,b){return J(m,e(b),K)}),!K&&(0,s.jsxs)("div",{className:"condition__add",children:[(0,s.jsx)("span",{className:"condition__add--line"}),(0,s.jsx)(A.PlusCircleOutlined,{className:y()("condition__add--icon",(_==null||(P=_.children)===null||P===void 0?void 0:P.length)>=X&&"condition__add--icon--disabled"),onClick:function(){_!=null&&_.children&&_.children.length>=X||_n({key:_.key,isOut:!0})},"data-testid":"icon-plus"})]})]},_.key)}return(0,s.jsxs)("div",{className:"dtc-ruleController__item",children:[(V==null?void 0:V.children)&&(0,s.jsx)("span",{className:y()("dtc-ruleController__item--line",{disabled:Z})}),(0,s.jsx)("div",{className:"dtc-ruleController__item--component",children:ln({rowKey:_.key,disabled:K,name:[].concat(S()($),["rowValues"]),rowValues:_.rowValues,onChange:en})}),!K&&(0,s.jsxs)("div",{className:"dtc-ruleController__item--operation",children:[_.level===rn?null:(0,s.jsx)(A.PlusCircleOutlined,{className:"icon",onClick:function(){return _n({key:_.key})},"data-testid":"icon-plus"}),(0,s.jsx)(A.MinusCircleOutlined,{className:"icon",onClick:function(){return un(_.key)},"data-testid":"icon-minus"})]})]},_.key)};return V?(U(V,!!T),(0,s.jsx)("div",{className:y()("dtc-ruleController",k),style:on,children:sn(V,[],!!T||!!V.disabled)})):null},r,c=function(p){return p[p.AND=1]="AND",p[p.OR=2]="OR",p}({}),D=(r={},B()(r,c.AND,"\u4E14"),B()(r,c.OR,"\u6216"),r);function j(p){return p.disabled===!0}var F=function(i){var V=i.component,T=i.disabled,rn=T===void 0?!1:T,X=i.value,k=!j(i)&&i,on=k.maxLevel,ln=on===void 0?5:on,_n=k.maxSize,un=_n===void 0?100:_n,an=k.notEmpty,en=an===void 0?{data:!0,message:"\u5FC5\u987B\u6709\u4E00\u6761\u6570\u636E"}:an,nn=k.initValues,U=k.onChange,w=function P(e,d,u){var h,m=e;if(m.key===d)return m;if(!((h=m.children)!==null&&h!==void 0&&h.length))return null;for(var b=0;b<m.children.length;b++){var v=m.children[b];if(v.key===d)return u?v:m;var Q=P(v,d,u);if(Q)return Q}},sn=function(e){var d=(0,f.Z)(X),u=w(d,e.key,e.isOut);J(u,e,nn),U==null||U(d)},J=function(e,d,u){var h=d.key;if(d.isOut)return e.children.push(Object.assign({},{rowValues:u},{key:g()(),level:e.level}));var m=e==null?void 0:e.children;if(!m){var b={key:e.key,level:e.level+1,type:c.AND,children:[{rowValues:e.rowValues,key:g()(),level:(e==null?void 0:e.level)+1},{rowValues:u,key:g()(),level:(e==null?void 0:e.level)+1}]};delete e.rowValues,Object.assign(e,b);return}for(var v=0;v<m.length;v+=1)m[v].key===h&&(e==null?void 0:e.level)<=ln&&(m[v]={key:m[v].key,type:c.AND,level:(e==null?void 0:e.level)+1,children:[Object.assign({},m[v],{key:g()(),level:(e==null?void 0:e.level)+1}),Object.assign({key:g()(),rowValues:u,level:(e==null?void 0:e.level)+1})]})},_=function(e){var d=(0,f.Z)(X),u=w(d,e,!1);if(en.data&&!(u!=null&&u.children))return O.default.info(en.message);if(!en.data&&!(u!=null&&u.children))return U==null?void 0:U(void 0);$(u,e),U==null||U(d)},$=function(e,d){var u,h,m,b,v=e;if(v.children=(u=v)===null||u===void 0||(h=u.children)===null||h===void 0?void 0:h.filter(function(dn){return dn.key!==d}),((m=v)===null||m===void 0||(b=m.children)===null||b===void 0?void 0:b.length)===1){var Q=Z(v.children[0]),tn=v.key;delete v.children,delete v.type,v=Object.assign(v,C()(C()({},Q),{},{key:tn,level:Q.level}))}},Z=function P(e){var d;e.children&&(d=e.children.map(function(h){return P(h)}));var u=C()(C()({},e),{},{children:d,level:(e==null?void 0:e.level)-1});return u},N=function(e,d){var u=(0,f.Z)(X),h=w(u,e,!0);h.type=d===c.AND?c.OR:c.AND,U==null||U(u)},K=function(e,d){var u,h=(0,f.Z)(X),m=w(h,e,!0);m.rowValues=C()(C()({},(u=m.rowValues)!==null&&u!==void 0?u:{}),d),U==null||U(h)};return(0,s.jsx)(a,{maxLevel:ln,maxSize:un,disabled:rn,value:X,component:V,onAddCondition:sn,onDeleteCondition:_,onChangeCondition:N,onChangeRowValues:K})},H=F}}]);
