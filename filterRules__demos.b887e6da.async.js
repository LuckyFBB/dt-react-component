"use strict";(self.webpackChunkdt_react_component=self.webpackChunkdt_react_component||[]).push([[1268],{77625:function(Y,O,n){n.r(O);var R=n(90554),f=n.n(R),L=n(28870),P=n(48651),U=n.n(P),I=n(86516),x=n.n(I),p=n(83345),z=n.n(p),b=n(50425),W=n(79685),S=n(19576),A=n(52368),o=n(63342),y=function(t){var E=t.rowValues.input,l=t.rowKey,a=t.onChange;return(0,o.jsx)(b.default,{value:E,onChange:function(c){return a==null?void 0:a(l,{input:c.target.value})}})};O.default=function(){var s=(0,W.useState)(A.Bq),t=x()(s,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(S.ZP,{component:function(r){return(0,o.jsx)(y,U()({},r))},value:E,onChange:function(r){return l(r)},initValues:A.jv}),(0,o.jsx)(L.default,{onClick:function(){return console.log(E)},children:"\u63A7\u5236\u53F0\u67E5\u770B\u6570\u636E"})]})}},1809:function(Y,O,n){n.r(O);var R=n(48651),f=n.n(R),L=n(90554),P=n.n(L),U=n(28870),I=n(99764),x=n.n(I),p=n(9923),z=n(86516),b=n.n(z),W=n(83345),S=n.n(W),A=n(50425),o=n(79685),y=n(19576),s=n(52368),t=n(63342),E=function(a){var r=a.rowValues.input,c=a.rowKey,D=a.disabled,j=a.onChange;return(0,t.jsx)(A.default,{value:r,onChange:function(H){return j==null?void 0:j(c,{input:H.target.value})},disabled:D})};O.default=function(){var l=p.Z.useForm(),a=b()(l,1),r=a[0],c=(0,o.useState)(!1),D=b()(c,2),j=D[0],F=D[1];return(0,o.useEffect)(function(){r.setFieldsValue({condition:s.Bq})},[]),(0,t.jsxs)(p.Z,{form:r,children:[(0,t.jsxs)(U.default,{style:{marginBottom:16},onClick:function(){return F(!j)},children:[j?"\u7F16\u8F91":"\u67E5\u770B","\u72B6\u6001"]}),(0,t.jsx)(p.Z.Item,{name:"condition",children:(0,t.jsx)(y.ZP,{component:function(h){return(0,t.jsx)(E,f()({},h))},disabled:j,initValues:s.jv})})]})}},16358:function(Y,O,n){n.r(O);var R=n(48651),f=n.n(R),L=n(88289),P=n.n(L),U=n(4125),I=n(73735),x=n.n(I),p=n(82549),z=n(86516),b=n.n(z),W=n(83345),S=n.n(W),A=n(50425),o=n(79685),y=n(19576),s=n(52368),t=n(63342),E=function(a){var r=a.rowValues.input,c=a.rowKey,D=a.onChange;return(0,t.jsx)(A.default,{value:r,onChange:function(F){return D==null?void 0:D(c,{input:F.target.value})}})};O.default=function(){var l=(0,o.useState)(s.Bq),a=b()(l,2),r=a[0],c=a[1],D=(0,o.useState)(2),j=b()(D,2),F=j[0],H=j[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(U.default,{style:{marginBottom:16},children:[(0,t.jsx)("span",{children:"\u6700\u5927\u5B50\u8282\u70B9\u4E2A\u6570:"}),(0,t.jsx)(p.Z,{value:F,min:0,precision:0,onChange:function(i){return H(i!=null?i:0)}})]}),(0,t.jsx)(y.ZP,{component:function(i){return(0,t.jsx)(E,f()({},i))},value:r,maxSize:F,onChange:function(i){return c(i)},initValues:s.jv})]})}},51801:function(Y,O,n){n.r(O);var R=n(48651),f=n.n(R),L=n(67822),P=n.n(L),U=n(39153),I=n(86516),x=n.n(I),p=n(83345),z=n.n(p),b=n(50425),W=n(79685),S=n(19576),A=n(52368),o=n(63342),y=function(t){var E=t.rowValues.input,l=t.rowKey,a=t.onChange;return(0,o.jsx)(b.default,{value:E,onChange:function(c){return a==null?void 0:a(l,{input:c.target.value})}})};O.default=function(){var s=(0,W.useState)(A.AD),t=x()(s,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U.default,{message:"\u53EF\u4EE5\u901A\u8FC7\u64CD\u4F5C\u6309\u94AE\u589E\u52A0\u5220\u9664\u6570\u636E\uFF0C\u5207\u6362\u4E14\u6216\u8282\u70B9\u5185\u5BB9",style:{marginBottom:16}}),(0,o.jsx)(S.ZP,{component:function(r){return(0,o.jsx)(y,f()({},r))},value:E,onChange:function(r){return l(r)},initValues:A.jv})]})}},95789:function(Y,O,n){n.r(O);var R=n(22786),f=n.n(R),L=n(46299),P=n.n(L),U=n(48651),I=n.n(U),x=n(90554),p=n.n(x),z=n(28870),b=n(86516),W=n.n(b),S=n(99764),A=n.n(S),o=n(9923),y=n(83345),s=n.n(y),t=n(50425),E=n(70300),l=n.n(E),a=n(79685),r=n(19576),c=n(52368),D=n(63342),j=function(H){var h=H.name;return(0,D.jsx)(o.Z.Item,{name:["condition"].concat(l()(h),["input"]),children:(0,D.jsx)(t.default,{})})};O.default=function(){var F=o.Z.useForm(),H=W()(F,1),h=H[0];return(0,D.jsxs)(o.Z,{form:h,children:[(0,D.jsx)(z.default,{onClick:function(){return h.setFieldsValue({condition:c.Bq})},style:{marginBottom:16},children:"\u6DFB\u52A0\u6570\u636E"}),(0,D.jsx)(o.Z.Item,{name:"condition",children:(0,D.jsx)(r.ZP,{component:function(V){return(0,D.jsx)(j,I()({},V))},notEmpty:{data:!1},initValues:c.jv})}),(0,D.jsx)(z.default,{onClick:P()(f()().mark(function i(){return f()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.t0=console,g.next=3,h.validateFields();case 3:return g.t1=g.sent,g.abrupt("return",g.t0.log.call(g.t0,g.t1));case 5:case"end":return g.stop()}},i)})),children:"\u63A7\u5236\u53F0\u67E5\u770B\u6570\u636E"})]})}},94034:function(Y,O,n){n.r(O);var R=n(48651),f=n.n(R),L=n(67822),P=n.n(L),U=n(39153),I=n(86516),x=n.n(I),p=n(83345),z=n.n(p),b=n(50425),W=n(79685),S=n(19576),A=n(52368),o=n(63342),y=function(t){var E=t.rowValues.input,l=t.disabled,a=t.rowKey,r=t.onChange;return(0,o.jsx)(b.default,{value:E,disabled:l,onChange:function(D){return r==null?void 0:r(a,{input:D.target.value})}})};O.default=function(){var s=(0,W.useState)(A.jN),t=x()(s,2),E=t[0],l=t[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U.default,{message:"\u9002\u7528\u4E8E\u90E8\u5206\u6570\u636E\u7981\u7528\u4E14\u53EF\u4EE5\u7F16\u8F91\u5176\u4ED6\u6570\u636E\u3002\u5E38\u89C1\u4E1A\u52A1\u60C5\u666F\uFF1A\u4E0A\u4E00\u6B21\u4FDD\u5B58\u7684\u6570\u636E\u4E0D\u53EF\u4FEE\u6539\uFF0C\u4F46\u9700\u8981\u5728\u5F53\u524D\u57FA\u7840\u4E0A\u7EE7\u7EED\u65B0\u589E\u6570\u636E\u3002",style:{marginBottom:16}}),(0,o.jsx)(S.ZP,{component:function(r){return(0,o.jsx)(y,f()({},r))},value:E,onChange:function(r){return l(r)},initValues:A.jv})]})}},52368:function(Y,O,n){n.d(O,{AD:function(){return p},Bq:function(){return I},jN:function(){return x},jv:function(){return U}});var R=n(48651),f=n.n(R),L=n(50576),P=n.n(L),U={input:""},I={key:P()(),level:0,rowValues:f()({},U)},x={key:P()(),level:0,type:1,children:[{rowValues:{input:""},disabled:!0,key:P()(),level:1},{key:P()(),type:1,level:2,disabled:!0,children:[{rowValues:{input:""},key:P()(),level:2},{key:P()(),rowValues:{input:""},level:2}]}]},p={key:P()(),level:1,type:1,children:[{rowValues:{input:""},key:P()(),level:1},{key:P()(),type:2,level:2,children:[{key:P()(),level:2,rowValues:{input:""}},{key:P()(),rowValues:{input:""},level:2}]}]}},19576:function(Y,O,n){n.d(O,{de:function(){return c},NZ:function(){return D},ZP:function(){return H}});var R=n(48651),f=n.n(R),L=n(71089),P=n(75020),U=n(5677),I=n.n(U),x=n(79685),p=n(25043),z=n(50576),b=n.n(z),W=n(70300),S=n.n(W),A=n(71074),o=n(68591),y=n.n(o),s=n(63342),t=32,E=16,l=new WeakMap,a=function(i){var V=i.value,g=i.disabled,rn=i.maxLevel,X=i.maxSize,k=i.className,on=i.style,ln=i.component,_n=i.onAddCondition,un=i.onDeleteCondition,an=i.onChangeCondition,en=i.onChangeRowValues,nn=function(_){return(_==null?void 0:_.type)&&[c.AND,c.OR].includes(_==null?void 0:_.type)},T=function J(_,$){var Z=$||!!_.disabled;if(!(_!=null&&_.children))return l.set(_,{height:t+E,lineHeight:t});_.children.map(function(G){return J(G,Z)});var N=!_.children.some(nn),K=nn(_.children[0]);if(Z){var B=_.children.reduce(function(G,q){return G+l.get(q).height},0),v,Q;if(N)v=B-t-E;else{var tn,dn=_.children[0],mn=_.children[_.children.length-1],cn=l.get(dn).height-w(_,!0),En=nn(mn),vn=w(_,!1),Dn=l.get(mn).height-E-vn;Q=En?vn:t/2,v=cn+((tn=_.children)===null||tn===void 0?void 0:tn.slice(1,-1).reduce(function(G,q){return G+l.get(q).height},0))+Dn}l.set(_,{bottom:Q,lineHeight:v,height:B})}else{var C=_.children.reduce(function(G,q){return G+l.get(q).height},t),e;if(N){var d=l.get(_.children[0]).height-E,u=t;e=C-d/2-u/2}else{var M,m=K?l.get(_.children[0]).lineHeight/2+t/2:t/2+E;e=m+((M=_.children)===null||M===void 0?void 0:M.slice(1).reduce(function(G,q){return G+l.get(q).height},t/2))}l.set(_,{height:C,lineHeight:e})}return _},w=function J(_,$){var Z,N,K,C=$?_==null||(Z=_.children)===null||Z===void 0?void 0:Z[0]:_==null||(N=_.children)===null||N===void 0?void 0:N[(_==null||(K=_.children)===null||K===void 0?void 0:K.length)-1];if(!C)return t/2;var e=nn(C);if(e){var d;return((d=l.get(C))===null||d===void 0?void 0:d.lineHeight)/2+J(C,$)}return t/2},sn=function J(_,$,Z){var N,K=Z||!!_.disabled;if(_!=null&&(N=_.children)!==null&&N!==void 0&&N.length){var C,e=function(B){var v=S()($);return v.push.apply(v,["children",B]),v},d=l.get(_),u=d.lineHeight,M=d.bottom;return(0,s.jsxs)("div",{className:y()("dtc-ruleController__condition",{"dtc-ruleController__condition--active":_.children.length>1}),children:[(0,s.jsxs)("div",{className:y()("condition__box",{disabled:K}),style:{height:u,bottom:M!=null?M:E},children:[(0,s.jsx)("span",{className:y()("condition__box--name",{disabled:K}),onClick:function(){return!K&&an(_.key,_==null?void 0:_.type)},children:D[_==null?void 0:_.type]}),_.children.length>1&&(0,s.jsx)("span",{className:y()("condition__box--line",{disabled:Z})})]}),_.children.map(function(m,B){return J(m,e(B),K)}),!K&&(0,s.jsxs)("div",{className:"condition__add",children:[(0,s.jsx)("span",{className:"condition__add--line"}),(0,s.jsx)(A.PlusCircleOutlined,{className:y()("condition__add--icon",(_==null||(C=_.children)===null||C===void 0?void 0:C.length)>=X&&"condition__add--icon--disabled"),onClick:function(){_!=null&&_.children&&_.children.length>=X||_n({key:_.key,isOut:!0})},"data-testid":"icon-plus"})]})]},_.key)}return(0,s.jsxs)("div",{className:"dtc-ruleController__item",children:[(V==null?void 0:V.children)&&(0,s.jsx)("span",{className:y()("dtc-ruleController__item--line",{disabled:Z})}),(0,s.jsx)("div",{className:"dtc-ruleController__item--component",children:ln({rowKey:_.key,disabled:K,name:[].concat(S()($),["rowValues"]),rowValues:_.rowValues,onChange:en})}),!K&&(0,s.jsxs)("div",{className:"dtc-ruleController__item--operation",children:[_.level===rn?null:(0,s.jsx)(A.PlusCircleOutlined,{className:"icon",onClick:function(){return _n({key:_.key})},"data-testid":"icon-plus"}),(0,s.jsx)(A.MinusCircleOutlined,{className:"icon",onClick:function(){return un(_.key)},"data-testid":"icon-minus"})]})]},_.key)};return V?(T(V,!!g),(0,s.jsx)("div",{className:y()("dtc-ruleController",k),style:on,children:sn(V,[],!!g||!!V.disabled)})):null},r,c=function(h){return h[h.AND=1]="AND",h[h.OR=2]="OR",h}({}),D=(r={},I()(r,c.AND,"\u4E14"),I()(r,c.OR,"\u6216"),r);function j(h){return h.disabled===!0}var F=function(i){var V=i.component,g=i.disabled,rn=g===void 0?!1:g,X=i.value,k=!j(i)&&i,on=k.maxLevel,ln=on===void 0?5:on,_n=k.maxSize,un=_n===void 0?100:_n,an=k.notEmpty,en=an===void 0?{data:!0,message:"\u5FC5\u987B\u6709\u4E00\u6761\u6570\u636E"}:an,nn=k.initValues,T=k.onChange,w=function C(e,d,u){var M,m=e;if(m.key===d)return m;if(!((M=m.children)!==null&&M!==void 0&&M.length))return null;for(var B=0;B<m.children.length;B++){var v=m.children[B];if(v.key===d)return u?v:m;var Q=C(v,d,u);if(Q)return Q}},sn=function(e){var d=(0,p.Z)(X),u=w(d,e.key,e.isOut);J(u,e,nn),T==null||T(d)},J=function(e,d,u){var M=d.key;if(d.isOut)return e.children.push(Object.assign({},{rowValues:u},{key:b()(),level:e.level}));var m=e==null?void 0:e.children;if(!m){var B={key:e.key,level:e.level+1,type:c.AND,children:[{rowValues:e.rowValues,key:b()(),level:(e==null?void 0:e.level)+1},{rowValues:u,key:b()(),level:(e==null?void 0:e.level)+1}]};delete e.rowValues,Object.assign(e,B);return}for(var v=0;v<m.length;v+=1)m[v].key===M&&(e==null?void 0:e.level)<=ln&&(m[v]={key:m[v].key,type:c.AND,level:(e==null?void 0:e.level)+1,children:[Object.assign({},m[v],{key:b()(),level:(e==null?void 0:e.level)+1}),Object.assign({key:b()(),rowValues:u,level:(e==null?void 0:e.level)+1})]})},_=function(e){var d=(0,p.Z)(X),u=w(d,e,!1);if(en.data&&!(u!=null&&u.children))return P.default.info(en.message);if(!en.data&&!(u!=null&&u.children))return T==null?void 0:T(void 0);$(u,e),T==null||T(d)},$=function(e,d){var u,M,m,B,v=e;if(v.children=(u=v)===null||u===void 0||(M=u.children)===null||M===void 0?void 0:M.filter(function(dn){return dn.key!==d}),((m=v)===null||m===void 0||(B=m.children)===null||B===void 0?void 0:B.length)===1){var Q=Z(v.children[0]),tn=v.key;delete v.children,delete v.type,v=Object.assign(v,f()(f()({},Q),{},{key:tn,level:Q.level}))}},Z=function C(e){var d;e.children&&(d=e.children.map(function(M){return C(M)}));var u=f()(f()({},e),{},{children:d,level:(e==null?void 0:e.level)-1});return u},N=function(e,d){var u=(0,p.Z)(X),M=w(u,e,!0);M.type=d===c.AND?c.OR:c.AND,T==null||T(u)},K=function(e,d){var u,M=(0,p.Z)(X),m=w(M,e,!0);m.rowValues=f()(f()({},(u=m.rowValues)!==null&&u!==void 0?u:{}),d),T==null||T(M)};return(0,s.jsx)(a,{maxLevel:ln,maxSize:un,disabled:rn,value:X,component:V,onAddCondition:sn,onDeleteCondition:_,onChangeCondition:N,onChangeRowValues:K})},H=F}}]);
